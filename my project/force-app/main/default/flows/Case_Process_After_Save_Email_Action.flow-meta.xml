<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>AdminOps_Email_without_requester</name>
        <label>AdminOps Email without requester</label>
        <locationX>50</locationX>
        <locationY>4031</locationY>
        <actionName>Case.ClosedCase_Buyer_Lead_w_o_Requester_adminops</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>if_caseRecord_is_null_0</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Closed_case_email_to_Buyer_account_adminops_without_requester</name>
        <label>Closed case email to Buyer account adminops without requester</label>
        <locationX>248</locationX>
        <locationY>2351</locationY>
        <actionName>Case.ClosedCase_Buyer_Account_w_o_Requester_Adminops</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Close_Case_Email_to_Buyer_Lead</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>ClosedCase_Buyer_Account_AdminOps</name>
        <label>ClosedCase - Buyer Account AdminOps</label>
        <locationX>248</locationX>
        <locationY>1247</locationY>
        <actionName>Case.ClosedCase_Buyer_Account_AdminOps</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Closed_Case_Email_to_Buyer_Account_w_o_Email_Sender</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>ClosedCase_Buyer_Account_w_o_Email_Sender_AdminOps</name>
        <label>ClosedCase - Buyer Account (w/o Email Sender) AdminOps</label>
        <locationX>248</locationX>
        <locationY>1799</locationY>
        <actionName>Case.ClosedCase_Buyer_Account_w_o_Email_Sender_AdminOps</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Closed_Case_Email_to_Buyer_Account_w_o_Requester</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>ClosedCase_Buyer_Lead</name>
        <label>ClosedCase_Buyer_Lead</label>
        <locationX>512</locationX>
        <locationY>2903</locationY>
        <actionName>Case.ClosedCase_Buyer_Lead</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>if_caseRecord_is_null_0_0</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>ClosedCase_Buyer_Lead_AdminOps</name>
        <label>ClosedCase - Buyer Lead AdminOps</label>
        <locationX>248</locationX>
        <locationY>2903</locationY>
        <actionName>Case.ClosedCase_Buyer_Lead_AdminOps</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>if_caseRecord_is_null_0_0</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>ClosedCase_Buyer_Lead_w_o_Requester_0_0</name>
        <label>ClosedCase_Buyer_Lead_w_o_Requester</label>
        <locationX>314</locationX>
        <locationY>4031</locationY>
        <actionName>Case.ClosedCase_Buyer_Lead_w_o_Requester</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>if_caseRecord_is_null_0</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Post_Comment_to_Chatter</name>
        <label>Post Comment to Chatter</label>
        <locationX>446</locationX>
        <locationY>791</locationY>
        <actionName>chatterPost</actionName>
        <actionType>chatterPost</actionType>
        <connector>
            <targetReference>Closed_Case_Email_to_Buyer_Account</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>text</name>
            <value>
                <elementReference>$Record.Comments__c</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>subjectNameOrId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Send_Email_to_BA</name>
        <label>Send Email to BA</label>
        <locationX>512</locationX>
        <locationY>1247</locationY>
        <actionName>Case.ClosedCase_Buyer_Account</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Closed_Case_Email_to_Buyer_Account_w_o_Email_Sender</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Send_Email_to_BA_1</name>
        <label>Send Email to BA</label>
        <locationX>512</locationX>
        <locationY>1799</locationY>
        <actionName>Case.ClosedCase_Buyer_Account_w_o_Email_Sender</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Closed_Case_Email_to_Buyer_Account_w_o_Requester</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Send_Email_to_BA_2_0</name>
        <label>Send Email to BA</label>
        <locationX>512</locationX>
        <locationY>2351</locationY>
        <actionName>Case.ClosedCase_Buyer_Account_w_o_Requester</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Close_Case_Email_to_Buyer_Lead</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Send_Quality_Rating_Notification_0</name>
        <label>Send Quality Rating Notification</label>
        <locationX>292</locationX>
        <locationY>5255</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>is_case_record_not_null</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>QualityRateNotificationBody</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <elementReference>QualityRateNotificationRecipientEmail</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Salesforce Case Rated</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>Assign_case_record_0_0</name>
        <label>Assign case record</label>
        <locationX>248</locationX>
        <locationY>4463</locationY>
        <assignmentItems>
            <assignToReference>caseRecord</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_email_fields_0_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_case_record_0_0_0</name>
        <label>Assign case record</label>
        <locationX>248</locationX>
        <locationY>3239</locationY>
        <assignmentItems>
            <assignToReference>caseRecord</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_email_fields_0_0_0_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_email_fields</name>
        <label>Assign email fields</label>
        <locationX>512</locationX>
        <locationY>3239</locationY>
        <assignmentItems>
            <assignToReference>caseRecord.Buyer_Lead_Owner_Email__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Lead__r.Owner:User.Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseRecord.Supplier_Account_Owner_Email__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Supplier_Account__r.Owner.Email</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Close_Case_Email_to_Buyer_Lead_w_o_Requester</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_email_fields_0_0</name>
        <label>Assign email fields</label>
        <locationX>512</locationX>
        <locationY>4463</locationY>
        <assignmentItems>
            <assignToReference>caseRecord.Buyer_Lead_Owner_Email__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Lead__r.Owner:User.Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseRecord.Supplier_Account_Owner_Email__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Supplier_Account__r.Owner.Email</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Quality_Rate_Notification_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_email_fields_0_0_0</name>
        <label>Assign email fields</label>
        <locationX>248</locationX>
        <locationY>4583</locationY>
        <assignmentItems>
            <assignToReference>caseRecord.Buyer_Lead_Owner_Email__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Lead__r.Owner:User.Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseRecord.Supplier_Account_Owner_Email__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Supplier_Account__r.Owner.Email</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Quality_Rate_Notification_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_email_fields_0_0_0_0_0</name>
        <label>Assign email fields</label>
        <locationX>248</locationX>
        <locationY>3359</locationY>
        <assignmentItems>
            <assignToReference>caseRecord.Buyer_Lead_Owner_Email__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Lead__r.Owner:User.Email</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>caseRecord.Supplier_Account_Owner_Email__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Supplier_Account__r.Owner.Email</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Close_Case_Email_to_Buyer_Lead_w_o_Requester</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>check_If_case_attachments_changed</name>
        <label>check If case attachments changed</label>
        <locationX>578</locationX>
        <locationY>335</locationY>
        <defaultConnector>
            <targetReference>Comment_Is_Updated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Not_changed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Number_of_Attachments__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Count_Attachments</targetReference>
            </connector>
            <label>Not changed</label>
        </rules>
    </decisions>
    <decisions>
        <name>check_Record_type_0</name>
        <label>check Record type</label>
        <locationX>380</locationX>
        <locationY>2783</locationY>
        <defaultConnector>
            <targetReference>ClosedCase_Buyer_Lead</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Record_Type_is_Admin_Ops_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AdminOps</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ClosedCase_Buyer_Lead_AdminOps</targetReference>
            </connector>
            <label>Record Type is Admin Ops</label>
        </rules>
    </decisions>
    <decisions>
        <name>check_Record_type_0_0</name>
        <label>check Record type</label>
        <locationX>380</locationX>
        <locationY>1127</locationY>
        <defaultConnector>
            <targetReference>Send_Email_to_BA</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Record_Type_is_Admin_Ops_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AdminOps</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ClosedCase_Buyer_Account_AdminOps</targetReference>
            </connector>
            <label>Record Type is Admin Ops</label>
        </rules>
    </decisions>
    <decisions>
        <name>check_Record_type_0_0_0</name>
        <label>check Record type</label>
        <locationX>380</locationX>
        <locationY>1679</locationY>
        <defaultConnector>
            <targetReference>Send_Email_to_BA_1</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Record_Type_is_Admin_Ops_0_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AdminOps</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ClosedCase_Buyer_Account_w_o_Email_Sender_AdminOps</targetReference>
            </connector>
            <label>Record Type is Admin Ops</label>
        </rules>
    </decisions>
    <decisions>
        <name>check_Record_type_0_0_0_0</name>
        <label>check Record type</label>
        <locationX>182</locationX>
        <locationY>3911</locationY>
        <defaultConnector>
            <targetReference>ClosedCase_Buyer_Lead_w_o_Requester_0_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Record_Type_is_Admin_Ops_0_0_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AdminOps</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AdminOps_Email_without_requester</targetReference>
            </connector>
            <label>Record Type is Admin Ops</label>
        </rules>
    </decisions>
    <decisions>
        <name>Close_Case_Email_to_Buyer_Lead</name>
        <label>Close Case Email to Buyer Lead</label>
        <locationX>578</locationX>
        <locationY>2663</locationY>
        <defaultConnector>
            <targetReference>Close_Case_Email_to_Buyer_Lead_w_o_Requester</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>condition_true</name>
            <conditionLogic>1 AND 2 AND 4 AND ( 3 OR 5 ) AND 6 AND 7 AND 8</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Lead__r.Owner:User.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.Owner.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>B2BMA Integration</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Admin API</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Max von Beust</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>check_Record_type_0</targetReference>
            </connector>
            <label>condition true</label>
        </rules>
    </decisions>
    <decisions>
        <name>Close_Case_Email_to_Buyer_Lead_w_o_Requester</name>
        <label>Close Case Email to Buyer Lead w/o Requester</label>
        <locationX>578</locationX>
        <locationY>3671</locationY>
        <defaultConnector>
            <targetReference>Quality_Rate_Notification_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>condition_true_0_0</name>
            <conditionLogic>1 AND 2 AND 4 AND (3 OR 5 ) AND (6 OR 7 OR 8)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Lead__r.Owner:User.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.Owner.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>B2BMA Integration</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Admin API</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Max von Beust</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>supplier_or_buyer_owner_email_must_be_present</targetReference>
            </connector>
            <label>condition true</label>
        </rules>
    </decisions>
    <decisions>
        <name>Closed_Case_Email_to_Buyer_Account</name>
        <label>Closed Case Email to Buyer Account</label>
        <locationX>578</locationX>
        <locationY>1007</locationY>
        <defaultConnector>
            <targetReference>Closed_Case_Email_to_Buyer_Account_w_o_Email_Sender</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Closed_Case_Email_to_Buyer_Accountt</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.Owner.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>B2BMA Integration</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Admin API</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Max von Beust</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.EmailSender__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>check_Record_type_0_0</targetReference>
            </connector>
            <label>Closed Case Email to Buyer Accountt</label>
        </rules>
    </decisions>
    <decisions>
        <name>Closed_Case_Email_to_Buyer_Account_w_o_Email_Sender</name>
        <label>Closed Case Email to Buyer Account w/o Email Sender</label>
        <locationX>578</locationX>
        <locationY>1559</locationY>
        <defaultConnector>
            <targetReference>Closed_Case_Email_to_Buyer_Account_w_o_Requester</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Closed_Case_Email_to_Buyer_Accountt_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.Owner.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>B2BMA Integration</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Admin API</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Max von Beust</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.EmailSender__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>check_Record_type_0_0_0</targetReference>
            </connector>
            <label>Closed Case Email to Buyer Accountt w/0 Email sender</label>
        </rules>
    </decisions>
    <decisions>
        <name>Closed_Case_Email_to_Buyer_Account_w_o_Requester</name>
        <label>Closed Case Email to Buyer Account w/o Requester</label>
        <locationX>578</locationX>
        <locationY>2111</locationY>
        <defaultConnector>
            <targetReference>Close_Case_Email_to_Buyer_Lead</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Closed_Case_Email_to_Buyer_Accountt_w_o_Requester</name>
            <conditionLogic>1 AND 2 AND 3 AND (4 OR 5 OR 6)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account.Owner.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>B2BMA Integration</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Admin API</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Requester__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Max von Beust</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Closedcase_recordtype_check</targetReference>
            </connector>
            <label>Closed Case Email to Buyer Accountt w/o Requester</label>
        </rules>
    </decisions>
    <decisions>
        <name>Closedcase_recordtype_check</name>
        <label>Closedcase recordtype check</label>
        <locationX>380</locationX>
        <locationY>2231</locationY>
        <defaultConnector>
            <targetReference>Send_Email_to_BA_2_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>check_admiops_recordtype</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AdminOps</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Closed_case_email_to_Buyer_account_adminops_without_requester</targetReference>
            </connector>
            <label>check admiops recordtype</label>
        </rules>
    </decisions>
    <decisions>
        <name>Comment_Is_Updated</name>
        <label>Comment Is Updated</label>
        <locationX>578</locationX>
        <locationY>671</locationY>
        <defaultConnector>
            <targetReference>Closed_Case_Email_to_Buyer_Account</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>comments_updated</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Comments__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Comments__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Closed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Post_Comment_to_Chatter</targetReference>
            </connector>
            <label>comments updated</label>
        </rules>
    </decisions>
    <decisions>
        <name>Email_found_0</name>
        <label>Email found</label>
        <locationX>424</locationX>
        <locationY>5135</locationY>
        <defaultConnector>
            <targetReference>is_case_record_not_null</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>yes2_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>QualityRateNotificationRecipientEmail</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>QualityRateNotificationRecipientEmail</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Quality_Rating_Notification_0</targetReference>
            </connector>
            <label>yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>if_caseRecord_is_null_0</name>
        <label>if caseRecord is null</label>
        <locationX>380</locationX>
        <locationY>4343</locationY>
        <defaultConnector>
            <targetReference>Assign_email_fields_0_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>NULL_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>caseRecord</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_case_record_0_0</targetReference>
            </connector>
            <label>NULL</label>
        </rules>
    </decisions>
    <decisions>
        <name>if_caseRecord_is_null_0_0</name>
        <label>if caseRecord is null</label>
        <locationX>380</locationX>
        <locationY>3119</locationY>
        <defaultConnector>
            <targetReference>Assign_email_fields</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>NULL_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>caseRecord</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_case_record_0_0_0</targetReference>
            </connector>
            <label>NULL</label>
        </rules>
    </decisions>
    <decisions>
        <name>is_case_record_not_null</name>
        <label>is case record not null</label>
        <locationX>578</locationX>
        <locationY>5567</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Not_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>caseRecord</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>update_case_record_0</targetReference>
            </connector>
            <label>Not null</label>
        </rules>
    </decisions>
    <decisions>
        <description>OPSSYS-939
For every Admin Ops case rated, the case owner should receive a mail, giving the following informations : 
The rate info : Info Quality and Info Quality comment 
The number and link to the case
The name of the person who rate the case
Case information (Case Type, Lead/Account name)</description>
        <name>Quality_Rate_Notification_0</name>
        <label>Rate Service Agent Quality Rate Notification</label>
        <locationX>578</locationX>
        <locationY>4895</locationY>
        <defaultConnector>
            <targetReference>is_case_record_not_null</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>no</defaultConnectorLabel>
        <rules>
            <name>yes_0</name>
            <conditionLogic>(1 OR 2) AND 3 AND 4</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Info_Quality_CS__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Info_Quality_CS__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AdminOps</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Info_Quality_CS__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_OwnerEmail_0</targetReference>
            </connector>
            <label>yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>supplier_or_buyer_owner_email_must_be_present</name>
        <label>supplier or buyer owner email must be present</label>
        <locationX>380</locationX>
        <locationY>3791</locationY>
        <defaultConnector>
            <targetReference>if_caseRecord_is_null_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>check_yes</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Buyer_Lead_Owner_Email__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Supplier_Account_Owner_Email__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>check_Record_type_0_0_0_0</targetReference>
            </connector>
            <label>check yes</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <interviewLabel>Case Process After Save Emails {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Case Process After Save Email Action</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>get_OwnerEmail_0</name>
        <label>get OwnerEmail</label>
        <locationX>424</locationX>
        <locationY>5015</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Email_found_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </filters>
        <object>User</object>
        <outputAssignments>
            <assignToReference>QualityRateNotificationRecipientEmail</assignToReference>
            <field>Email</field>
        </outputAssignments>
    </recordLookups>
    <recordUpdates>
        <name>update_case_record_0</name>
        <label>update case record</label>
        <locationX>446</locationX>
        <locationY>5687</locationY>
        <inputReference>caseRecord</inputReference>
    </recordUpdates>
    <start>
        <locationX>452</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>check_If_case_attachments_changed</targetReference>
        </connector>
        <object>Case</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <subflows>
        <name>Count_Attachments</name>
        <label>Count Attachments</label>
        <locationX>446</locationX>
        <locationY>455</locationY>
        <connector>
            <targetReference>Comment_Is_Updated</targetReference>
        </connector>
        <flowName>Case_Count_Number_of_Attachments</flowName>
        <inputAssignments>
            <name>InputCaseID</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <textTemplates>
        <name>Notification</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;asdf&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>QualityRateNotificationBody</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;Hi {!$Record.Owner:User.FirstName},&lt;/p&gt;&lt;p&gt;Good news,&amp;nbsp;your case &lt;strong&gt;{!$Record.Subject}&lt;/strong&gt;&amp;nbsp;has been rated!&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Case Type: &lt;/strong&gt;{!$Record.Type}&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Lead:&amp;nbsp;&lt;/strong&gt;{!$Record.Lead_Company_Name__c}&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Account:&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/strong&gt;{!$Record.Account.Name}&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Feedback: &lt;/strong&gt;{!$Record.Info_Quality_CS__c}&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Feedback Comments:&amp;nbsp;&lt;/strong&gt;{!$Record.Info_Quality_CS_Other__c}&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Requester : &lt;/strong&gt;{!$Record.Requester__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;For details, please check your case &lt;a href=&quot;https://choco--staging.lightning.force.com/lightning/r/Case/{!$Record.Id}/view&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;{!$Record.CaseNumber}&lt;/strong&gt;&lt;/a&gt;.&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>caseRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>QualityRateNotificationRecipientEmail</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
